<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DaPlot ç»„ä»¶æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 20px;
            background: #f8f9fa;
        }
        
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        
        .test-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-warning { background: #ffc107; color: #212529; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-secondary { background: #6c757d; color: white; }
        
        .btn:hover { opacity: 0.8; }
        
        .component-container {
            min-height: 100px;
            border: 1px dashed #ccc;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            background: #fafafa;
        }
        
        .tooltip-demo {
            display: inline-block;
            margin: 10px;
            padding: 8px 12px;
            background: #007bff;
            color: white;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª DaPlot ç»„ä»¶æµ‹è¯•é¡µé¢</h1>
    <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•æ–°åˆ›å»ºçš„UIç»„ä»¶åŠŸèƒ½</p>

    <!-- LoadingSpinner æµ‹è¯• -->
    <div class="test-section">
        <h3>ğŸ“Š LoadingSpinner åŠ è½½åŠ¨ç”»ç»„ä»¶</h3>
        <div class="test-buttons">
            <button class="btn btn-primary" onclick="testLoadingSpinner('spinner')">æ—‹è½¬åŠ è½½</button>
            <button class="btn btn-primary" onclick="testLoadingSpinner('dots')">ç‚¹çŠ¶åŠ è½½</button>
            <button class="btn btn-primary" onclick="testLoadingSpinner('bars')">æ¡çŠ¶åŠ è½½</button>
            <button class="btn btn-primary" onclick="testLoadingSpinner('pulse')">è„‰å†²åŠ è½½</button>
            <button class="btn btn-primary" onclick="testLoadingSpinner('ring')">ç¯å½¢åŠ è½½</button>
            <button class="btn btn-secondary" onclick="hideLoadingSpinner()">éšè—åŠ è½½</button>
        </div>
        <div id="loading-container" class="component-container"></div>
    </div>

    <!-- StatusMessage æµ‹è¯• -->
    <div class="test-section">
        <h3>ğŸ’¬ StatusMessage çŠ¶æ€æ¶ˆæ¯ç»„ä»¶</h3>
        <div class="test-buttons">
            <button class="btn btn-success" onclick="testStatusMessage('success')">æˆåŠŸæ¶ˆæ¯</button>
            <button class="btn btn-danger" onclick="testStatusMessage('error')">é”™è¯¯æ¶ˆæ¯</button>
            <button class="btn btn-warning" onclick="testStatusMessage('warning')">è­¦å‘Šæ¶ˆæ¯</button>
            <button class="btn btn-primary" onclick="testStatusMessage('info')">ä¿¡æ¯æ¶ˆæ¯</button>
            <button class="btn btn-secondary" onclick="testNotifications()">é€šçŸ¥æ¶ˆæ¯</button>
        </div>
        <div id="status-container" class="component-container"></div>
    </div>

    <!-- Modal æµ‹è¯• -->
    <div class="test-section">
        <h3>ğŸªŸ Modal æ¨¡æ€æ¡†ç»„ä»¶</h3>
        <div class="test-buttons">
            <button class="btn btn-primary" onclick="testModal('basic')">åŸºç¡€æ¨¡æ€æ¡†</button>
            <button class="btn btn-primary" onclick="testModal('large')">å¤§å‹æ¨¡æ€æ¡†</button>
            <button class="btn btn-success" onclick="testModal('confirm')">ç¡®è®¤å¯¹è¯æ¡†</button>
            <button class="btn btn-warning" onclick="testModal('alert')">è­¦å‘Šå¯¹è¯æ¡†</button>
            <button class="btn btn-secondary" onclick="testModal('prompt')">è¾“å…¥å¯¹è¯æ¡†</button>
        </div>
    </div>

    <!-- Tooltip æµ‹è¯• -->
    <div class="test-section">
        <h3>ğŸ’¡ Tooltip æç¤ºæ¡†ç»„ä»¶</h3>
        <p>å°†é¼ æ ‡æ‚¬åœåœ¨ä¸‹é¢çš„å…ƒç´ ä¸ŠæŸ¥çœ‹æç¤ºæ•ˆæœï¼š</p>
        <div>
            <span class="tooltip-demo" data-tooltip="è¿™æ˜¯ä¸€ä¸ªé¡¶éƒ¨æç¤º" data-placement="top">é¡¶éƒ¨æç¤º</span>
            <span class="tooltip-demo" data-tooltip="è¿™æ˜¯ä¸€ä¸ªåº•éƒ¨æç¤º" data-placement="bottom">åº•éƒ¨æç¤º</span>
            <span class="tooltip-demo" data-tooltip="è¿™æ˜¯ä¸€ä¸ªå·¦ä¾§æç¤º" data-placement="left">å·¦ä¾§æç¤º</span>
            <span class="tooltip-demo" data-tooltip="è¿™æ˜¯ä¸€ä¸ªå³ä¾§æç¤º" data-placement="right">å³ä¾§æç¤º</span>
            <span class="tooltip-demo" data-tooltip="è¿™æ˜¯ä¸€ä¸ªäº®è‰²ä¸»é¢˜æç¤º" data-theme="light">äº®è‰²ä¸»é¢˜</span>
        </div>
    </div>

    <!-- ErrorBoundary æµ‹è¯• -->
    <div class="test-section">
        <h3>ğŸš¨ ErrorBoundary é”™è¯¯è¾¹ç•Œç»„ä»¶</h3>
        <div class="test-buttons">
            <button class="btn btn-danger" onclick="testErrorBoundary()">è§¦å‘é”™è¯¯</button>
            <button class="btn btn-secondary" onclick="clearErrorBoundary()">æ¸…é™¤é”™è¯¯</button>
        </div>
        <div id="error-container" class="component-container">
            <p>è¿™é‡Œæ˜¯æ­£å¸¸å†…å®¹ï¼Œç‚¹å‡»"è§¦å‘é”™è¯¯"æŒ‰é’®æµ‹è¯•é”™è¯¯å¤„ç†</p>
        </div>
    </div>

    <!-- ChartConfig æµ‹è¯• -->
    <div class="test-section">
        <h3>âš™ï¸ ChartConfig å›¾è¡¨é…ç½®ç»„ä»¶</h3>
        <div class="test-buttons">
            <button class="btn btn-primary" onclick="testChartConfig()">æ˜¾ç¤ºé…ç½®é¢æ¿</button>
            <button class="btn btn-secondary" onclick="hideChartConfig()">éšè—é…ç½®é¢æ¿</button>
        </div>
        <div id="chart-config-container" class="component-container"></div>
    </div>

    <!-- åŠ è½½ç»„ä»¶è„šæœ¬ -->
    <script src="src/utils/constants.js"></script>
    <script src="src/components/LoadingSpinner.js"></script>
    <script src="src/components/StatusMessage.js"></script>
    <script src="src/components/Modal.js"></script>
    <script src="src/components/Tooltip.js"></script>
    <script src="src/components/ErrorBoundary.js"></script>
    <script src="src/components/ChartConfig.js"></script>

    <script>
        // å…¨å±€å˜é‡
        let loadingSpinner = null;
        let statusMessage = null;
        let errorBoundary = null;
        let chartConfig = null;

        // LoadingSpinner æµ‹è¯•
        function testLoadingSpinner(type) {
            if (loadingSpinner) {
                loadingSpinner.destroy();
            }
            
            loadingSpinner = new LoadingSpinner({
                container: 'loading-container',
                type: type,
                text: `æ­£åœ¨åŠ è½½ (${type})...`,
                size: 'medium',
                color: '#007bff'
            });
            
            loadingSpinner.show();
        }

        function hideLoadingSpinner() {
            if (loadingSpinner) {
                loadingSpinner.hide();
            }
        }

        // StatusMessage æµ‹è¯•
        function testStatusMessage(type) {
            if (statusMessage) {
                statusMessage.destroy();
            }

            const messages = {
                success: 'æ“ä½œæˆåŠŸå®Œæˆï¼',
                error: 'å‘ç”Ÿäº†ä¸€ä¸ªé”™è¯¯ï¼Œè¯·é‡è¯•ã€‚',
                warning: 'è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªè­¦å‘Šä¿¡æ¯ã€‚',
                info: 'è¿™æ˜¯ä¸€æ¡ä¿¡æ¯æç¤ºã€‚'
            };

            statusMessage = new StatusMessage({
                container: 'status-container',
                type: type,
                message: messages[type],
                title: type.charAt(0).toUpperCase() + type.slice(1),
                autoClose: true,
                autoCloseDelay: 3000
            });

            statusMessage.show();
        }

        function testNotifications() {
            StatusMessage.notify('è¿™æ˜¯ä¸€ä¸ªé€šçŸ¥æ¶ˆæ¯', 'info');
            setTimeout(() => StatusMessage.notify('è¿™æ˜¯ä¸€ä¸ªæˆåŠŸé€šçŸ¥', 'success'), 500);
            setTimeout(() => StatusMessage.notify('è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šé€šçŸ¥', 'warning'), 1000);
        }

        // Modal æµ‹è¯•
        async function testModal(type) {
            switch (type) {
                case 'basic':
                    const modal = new Modal({
                        title: 'åŸºç¡€æ¨¡æ€æ¡†',
                        content: '<p>è¿™æ˜¯ä¸€ä¸ªåŸºç¡€çš„æ¨¡æ€æ¡†ç¤ºä¾‹ã€‚</p><p>æ‚¨å¯ä»¥åœ¨è¿™é‡Œæ”¾ç½®ä»»ä½•å†…å®¹ã€‚</p>',
                        size: 'medium',
                        showFooter: true
                    });
                    modal.show();
                    break;

                case 'large':
                    const largeModal = new Modal({
                        title: 'å¤§å‹æ¨¡æ€æ¡†',
                        content: '<p>è¿™æ˜¯ä¸€ä¸ªå¤§å‹æ¨¡æ€æ¡†ï¼Œé€‚åˆæ˜¾ç¤ºæ›´å¤šå†…å®¹ã€‚</p>'.repeat(10),
                        size: 'large',
                        scrollable: true,
                        showFooter: true
                    });
                    largeModal.show();
                    break;

                case 'confirm':
                    const confirmed = await Modal.confirm('æ‚¨ç¡®å®šè¦æ‰§è¡Œè¿™ä¸ªæ“ä½œå—ï¼Ÿ', {
                        title: 'ç¡®è®¤æ“ä½œ'
                    });
                    alert(confirmed ? 'ç”¨æˆ·ç¡®è®¤äº†æ“ä½œ' : 'ç”¨æˆ·å–æ¶ˆäº†æ“ä½œ');
                    break;

                case 'alert':
                    await Modal.alert('è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šæ¶ˆæ¯ï¼', {
                        title: 'è­¦å‘Š'
                    });
                    break;

                case 'prompt':
                    const result = await Modal.prompt('è¯·è¾“å…¥æ‚¨çš„å§“åï¼š', 'å¼ ä¸‰', {
                        title: 'è¾“å…¥ä¿¡æ¯'
                    });
                    if (result !== null) {
                        alert(`æ‚¨è¾“å…¥çš„å§“åæ˜¯ï¼š${result}`);
                    }
                    break;
            }
        }

        // ErrorBoundary æµ‹è¯•
        function testErrorBoundary() {
            if (!errorBoundary) {
                errorBoundary = new ErrorBoundary({
                    container: 'error-container',
                    showDetails: true,
                    allowRetry: true
                });
            }

            // æ¨¡æ‹Ÿé”™è¯¯
            errorBoundary.handleError(new Error('è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é”™è¯¯'), {
                type: 'test',
                message: 'ç”¨æˆ·è§¦å‘çš„æµ‹è¯•é”™è¯¯'
            });
        }

        function clearErrorBoundary() {
            if (errorBoundary) {
                errorBoundary.clearError();
            }
        }

        // ChartConfig æµ‹è¯•
        function testChartConfig() {
            if (chartConfig) {
                chartConfig.destroy();
            }

            chartConfig = new ChartConfig({
                container: 'chart-config-container',
                chartType: 'scatter',
                showPreview: true,
                showPresets: true,
                onChange: (config, key, value) => {
                    console.log('é…ç½®å˜æ›´:', key, value);
                },
                onApply: (config) => {
                    console.log('åº”ç”¨é…ç½®:', config);
                    alert('é…ç½®å·²åº”ç”¨ï¼æŸ¥çœ‹æ§åˆ¶å°äº†è§£è¯¦æƒ…ã€‚');
                }
            });
        }

        function hideChartConfig() {
            if (chartConfig) {
                chartConfig.destroy();
                chartConfig = null;
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ‰ ç»„ä»¶æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆï¼');
            console.log('å¯ç”¨ç»„ä»¶:', {
                LoadingSpinner: typeof LoadingSpinner !== 'undefined',
                StatusMessage: typeof StatusMessage !== 'undefined',
                Modal: typeof Modal !== 'undefined',
                Tooltip: typeof Tooltip !== 'undefined',
                ErrorBoundary: typeof ErrorBoundary !== 'undefined',
                ChartConfig: typeof ChartConfig !== 'undefined'
            });
        });
    </script>
</body>
</html>